<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/heroicons@2.0.18/24/outline/index.js" type="module"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #000000 0%, #1e293b 50%, #0f172a 100%);
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(168, 85, 247, 0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        .cyber-glow {
            box-shadow: 
                0 0 20px rgba(6, 182, 212, 0.5),
                0 0 40px rgba(168, 85, 247, 0.3),
                0 0 60px rgba(6, 182, 212, 0.2);
        }
        
        .cyber-glow-hover:hover {
            box-shadow: 
                0 0 30px rgba(6, 182, 212, 0.7),
                0 0 60px rgba(168, 85, 247, 0.5),
                0 0 90px rgba(6, 182, 212, 0.3);
        }
        
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 
                    0 0 20px rgba(6, 182, 212, 0.5),
                    0 0 40px rgba(168, 85, 247, 0.3);
            }
            50% {
                box-shadow: 
                    0 0 30px rgba(6, 182, 212, 0.8),
                    0 0 60px rgba(168, 85, 247, 0.6),
                    0 0 90px rgba(6, 182, 212, 0.4);
            }
        }
        
        .pulse-animation {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes fill-bar {
            from {
                width: 0%;
            }
        }
        
        .strength-bar {
            animation: fill-bar 0.8s ease-out;
        }
        
        .mono-font {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 32px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(51, 65, 85, 0.8);
            transition: 0.3s;
            border-radius: 32px;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.5);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }
    </style>
</head>
<body class="flex items-center justify-center p-4 md:p-8">
    <div class="relative z-10 w-full max-w-2xl space-y-6">
        <!-- Main Card -->
        <div class="backdrop-blur-md bg-white/10 border border-white/20 rounded-2xl p-6 md:p-8 shadow-2xl cyber-glow">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-bold mb-3 bg-gradient-to-r from-cyan-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent">
                    Password Generator
                </h1>
                <p class="text-slate-400 text-sm md:text-base">Create secure passwords instantly</p>
            </div>
            
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="mb-6 p-4 rounded-xl {% if category == 'success' %}bg-green-500/20 border border-green-500/30 text-green-300{% else %}bg-red-500/20 border border-red-500/30 text-red-300{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <!-- Form -->
            <form method="POST" action="/" class="space-y-6">
                <!-- Length Input -->
                <div>
                    <label for="length" class="block text-cyan-300 font-semibold mb-3 text-sm md:text-base">
                        Password Length
                    </label>
                    <input 
                        type="number" 
                        id="length" 
                        name="length" 
                        value="12" 
                        min="1" 
                        max="128" 
                        required
                        class="w-full px-6 py-4 bg-black/50 border border-cyan-500/30 rounded-xl text-white text-lg md:text-xl font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/50 transition-all mono-font"
                        placeholder="12"
                    >
                </div>
                
                <!-- Toggle Switches -->
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-black/30 rounded-xl border border-white/10">
                        <label for="include_numbers" class="text-white font-medium text-sm md:text-base cursor-pointer flex-1">
                            Include Numbers
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="include_numbers" name="include_numbers" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-black/30 rounded-xl border border-white/10">
                        <label for="include_symbols" class="text-white font-medium text-sm md:text-base cursor-pointer flex-1">
                            Include Symbols
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="include_symbols" name="include_symbols" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-black/30 rounded-xl border border-white/10">
                        <label for="save_to_file" class="text-white font-medium text-sm md:text-base cursor-pointer flex-1">
                            Save to File
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="save_to_file" name="save_to_file">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- Generate Button -->
                <button 
                    type="submit" 
                    class="w-full py-5 bg-gradient-to-r from-cyan-500 via-purple-500 to-cyan-500 text-white font-bold text-lg md:text-xl rounded-xl shadow-lg hover:scale-105 transition-all duration-300 pulse-animation cyber-glow-hover"
                >
                    Generate Password
                </button>
            </form>
            
            <!-- Stats Display -->
            <div id="stats" class="mt-6 p-4 bg-black/30 rounded-xl border border-white/10 text-center text-slate-400 text-sm">
                Click generate to see stats
            </div>
        </div>
        
        <!-- Password Result Card -->
        {% if password %}
        <div class="backdrop-blur-md bg-white/10 border border-white/20 rounded-2xl p-6 md:p-8 shadow-2xl cyber-glow animate-fade-in">
            <h2 class="text-cyan-300 font-bold text-xl mb-4">Your Password</h2>
            
            <!-- Password Display -->
            <div class="mono-font text-2xl md:text-4xl bg-black/50 p-6 rounded-xl border border-cyan-500/30 text-white text-center mb-6 break-all font-bold tracking-wider">
                {{ password }}
            </div>
            
            <!-- Copy Button -->
            <button 
                onclick="navigator.clipboard.writeText('{{ password }}').then(()=>{const btn=event.target;const original=btn.innerHTML;btn.innerHTML='<svg class=\'w-5 h-5 inline mr-2\' fill=\'none\' stroke=\'currentColor\' viewBox=\'0 0 24 24\'><path stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'M5 13l4 4L19 7\'></path></svg>Copied!';setTimeout(()=>btn.innerHTML=original,2000)}).catch(()=>alert('Copy failed'))"
                class="flex items-center justify-center gap-2 w-full py-4 bg-gradient-to-r from-cyan-600 to-purple-600 text-white font-semibold rounded-xl hover:from-cyan-500 hover:to-purple-500 transition-all duration-300 hover:scale-105"
            >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                </svg>
                Copy Password
            </button>
            
            <!-- Strength Meter -->
            <div class="mt-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-slate-300 font-semibold text-sm">Strength</span>
                    <span class="text-white font-bold {% if strength.lower() == 'weak' %}text-red-400{% elif strength.lower() == 'medium' %}text-yellow-400{% else %}text-green-400{% endif %}">
                        {{ strength }}
                    </span>
                </div>
                <div class="w-full h-3 bg-black/50 rounded-full overflow-hidden border border-white/10">
                    <div 
                        id="strength-bar"
                        class="strength-bar h-full rounded-full transition-all duration-500 {% if strength.lower() == 'weak' %}bg-gradient-to-r from-red-500 to-red-600{% elif strength.lower() == 'medium' %}bg-gradient-to-r from-yellow-500 to-yellow-600{% else %}bg-gradient-to-r from-green-500 to-green-600{% endif %}"
                        data-strength="{{ strength.lower() }}"
                    ></div>
                </div>
                <script>
                    (function() {
                        const bar = document.getElementById('strength-bar');
                        if (bar) {
                            const strength = bar.getAttribute('data-strength');
                            let width = '100%';
                            let shadow = 'rgba(34, 197, 94, 0.5)';
                            if (strength === 'weak') {
                                width = '33%';
                                shadow = 'rgba(239, 68, 68, 0.5)';
                            } else if (strength === 'medium') {
                                width = '66%';
                                shadow = 'rgba(234, 179, 8, 0.5)';
                            }
                            bar.style.width = width;
                            bar.style.boxShadow = '0 0 10px ' + shadow;
                        }
                    })();
                </script>
            </div>
        </div>
        {% endif %}
    </div>
    
    <script>
        // Load existing stats from localStorage
        let gens = JSON.parse(localStorage.getItem('pwStats') || '[]');
        const btn = document.querySelector('button[type="submit"]');
        const statsEl = document.getElementById('stats');
        
        // Update stats when form is submitted
        if (btn) {
            btn.onclick = () => {
                const len = parseInt(document.querySelector('input[name="length"]').value);
                gens.push({length: len, time: new Date().toISOString()});
                localStorage.setItem('pwStats', JSON.stringify(gens));
                const avg = gens.reduce((a, b) => a + b.length, 0) / gens.length;
                statsEl.innerHTML = `Generated: ${gens.length} | Avg length: ${avg.toFixed(1)}`;
            };
        }
        
        // Load initial stats on page load
        if (gens.length && statsEl) {
            const avg = gens.reduce((a, b) => a + b.length, 0) / gens.length;
            statsEl.innerHTML = `Generated: ${gens.length} | Avg length: ${avg.toFixed(1)}`;
        }
    </script>
</body>
</html>
